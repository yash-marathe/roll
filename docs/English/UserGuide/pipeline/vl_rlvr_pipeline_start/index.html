<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-English/UserGuide/pipeline/vl_rlvr_pipeline_start">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">RLVR Pipeline for VLM | ROLL</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://alibaba.github.io/ROLL/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://alibaba.github.io/ROLL/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://alibaba.github.io/ROLL/docs/English/UserGuide/pipeline/vl_rlvr_pipeline_start"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="RLVR Pipeline for VLM | ROLL"><meta data-rh="true" name="description" content="Table of Contents"><meta data-rh="true" property="og:description" content="Table of Contents"><link data-rh="true" rel="icon" href="/ROLL/img/logo.png"><link data-rh="true" rel="canonical" href="https://alibaba.github.io/ROLL/docs/English/UserGuide/pipeline/vl_rlvr_pipeline_start"><link data-rh="true" rel="alternate" href="https://alibaba.github.io/ROLL/docs/English/UserGuide/pipeline/vl_rlvr_pipeline_start" hreflang="en"><link data-rh="true" rel="alternate" href="https://alibaba.github.io/ROLL/docs/English/UserGuide/pipeline/vl_rlvr_pipeline_start" hreflang="x-default"><link rel="stylesheet" href="/ROLL/assets/css/styles.ee92b8a2.css">
<link rel="preload" href="/ROLL/assets/js/runtime~main.9d31db2a.js" as="script">
<link rel="preload" href="/ROLL/assets/js/main.708a671a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ROLL/"><div class="navbar__logo"><img src="/ROLL/img/logo.png" alt="ROLL Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/ROLL/img/logo.png" alt="ROLL Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ROLL</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ROLL/docs/English/DesignImplementation/AgenticPipeline">文档</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/alibaba/ROLL" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/ROLL/docs/English/DesignImplementation/AgenticPipeline">English</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ROLL/docs/English/DesignImplementation/AgenticPipeline">DesignImplementation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ROLL/docs/English/DevelopmentGuide/support_new_models_en">DevelopmentGuide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ROLL/docs/English/QuickStart/config_guide">QuickStart</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/ROLL/docs/English/UserGuide/trackers_and_metrics">UserGuide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/trackers_and_metrics">Trackers and Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/offload_reload_control">GPU Time-Division Multiplexing Control Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/megatron_convert_2_hf">Converting MCoreAdapter Models to Hugging Face Format</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/device_mapping">ROLL Resource Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/checkpoint_and_resume">Checkpoint Saving and Resuming Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/async_training_agentic">Agentic Asynchronous Training Feature Usage Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/agentic_async_parallel_rollout">Agentic Asynchronous Parallel Rollout</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ROLL/docs/English/UserGuide/algorithms/agentic_StarPO">algorithms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/ROLL/docs/English/UserGuide/backend/vllm">backend</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/ROLL/docs/English/UserGuide/pipeline/vl_rlvr_pipeline_start">pipeline</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ROLL/docs/English/UserGuide/pipeline/vl_rlvr_pipeline_start">RLVR Pipeline for VLM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/pipeline/rlvr_pipeline_start">RLVR Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/pipeline/dpo_pipeline_start">DPO Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/pipeline/distill_pipeline_start">Distill Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/pipeline/agentic_pipeline_start">Agentic Pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/UserGuide/pipeline/agent_pipeline_start">Comprehensive Guide: Using the Agentic Part of ROLL</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ROLL/docs/English/start">start</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/ROLL/docs/">index</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/ROLL/docs/简体中文/使用指南/agentic_async_parallel_rollout">简体中文</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ROLL/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">English</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">UserGuide</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">pipeline</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RLVR Pipeline for VLM</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>RLVR Pipeline for VLM</h1><p><strong>Table of Contents</strong></p><ul><li><a href="#rlvr-pipeline-for-vlm">RLVR Pipeline for VLM</a><ul><li><a href="#%EF%B8%8Foverview">✨️Overview</a></li><li><a href="#%EF%B8%8Fcore-components">✨️Core Components</a><ul><li><a href="#main-module-rlvrvlmpipeline">Main Module (<code>RLVRPipeline</code>)</a></li><li><a href="#configuration-file-rlvrconfig">Configuration File (<code>RLVRConfig</code>)</a></li><li><a href="#reward-worker">Reward Worker</a></li></ul></li><li><a href="#%EF%B8%8Fdata-preparation">✨️Data Preparation</a><ul><li><a href="#data-format">Data Format</a></li></ul></li><li><a href="#%EF%B8%8Frunning-the-pipeline">✨️Running the Pipeline</a><ul><li><a href="#method-1-using-python-launcher-script">Method 1: Using Python Launcher Script</a></li><li><a href="#method-2-using-helper-shell-scripts">Method 2: Using Helper Shell Scripts</a></li></ul></li><li><a href="#%EF%B8%8Fstep-by-step-example">✨️Step-by-Step Example</a><ul><li><a href="#step-1-configure-settings">Step 1: Configure Settings</a></li><li><a href="#step-2-prepare-environment-and-dependencies">Step 2: Prepare Environment and Dependencies</a></li><li><a href="#step-3-launch-the-pipeline">Step 3: Launch the Pipeline</a></li><li><a href="#step-4-monitoring">Step 4: Monitoring</a></li><li><a href="#step-5-outputs-and-results">Step 5: Outputs and Results</a></li></ul></li></ul></li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="️overview">✨️Overview<a href="#️overview" class="hash-link" aria-label="Direct link to ✨️Overview" title="Direct link to ✨️Overview">​</a></h2><p> RLVR pipeline for VLM shares the same advantages with its counterpart for LLM (<a href="/ROLL/docs/English/UserGuide/pipeline/rlvr_pipeline_start">doc</a>), and it has built-in support for both visual reasoning and visual perception tasks, including math (for reasoning) and detection (for perception) currently, each equipped with specialized reward evaluation mechanisms, which enables simultaneous optimization of model capabilities across multiple domains such as math and detection.</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="️core-components">✨️Core Components<a href="#️core-components" class="hash-link" aria-label="Direct link to ✨️Core Components" title="Direct link to ✨️Core Components">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="main-module-rlvrvlmpipeline">Main Module (<code>RLVRVLMPipeline</code>)<a href="#main-module-rlvrvlmpipeline" class="hash-link" aria-label="Direct link to main-module-rlvrvlmpipeline" title="Direct link to main-module-rlvrvlmpipeline">​</a></h3><p><code>RLVRVLMPipeline</code> (located in <code>roll/pipeline/rlvr/rlvr_vlm_pipeline.py</code>) is the primary coordinator for the entire reinforcement learning process. It manages the complete training workflow, including:</p><ul><li>Initializing and managing distributed workers (actor, critic, reference, and various reward workers).</li><li>Coordinating data collection and processing.</li><li>Executing model training steps (e.g., PPO updates for actor and critic).</li><li>Handling model synchronization and checkpoint saving.</li><li>Validation set evaluation.</li><li>Recording metrics and experiment tracking.</li></ul><p><strong>Source code</strong>: <code>roll/pipeline/rlvr/rlvr_vlm_pipeline.py</code>, in which Qwen2.5-VL is supported directly</p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-file-rlvrconfig">Configuration File (<code>RLVRConfig</code>)<a href="#configuration-file-rlvrconfig" class="hash-link" aria-label="Direct link to configuration-file-rlvrconfig" title="Direct link to configuration-file-rlvrconfig">​</a></h3><p>RLVR pipeline for VLM uses the same configuration file (<code>RLVRConfig</code>) with LLM, please refer to <a href="/ROLL/docs/English/UserGuide/pipeline/rlvr_pipeline_start">docs of RLVR Pipeline for LLM</a> for configuration details. </p><p>A configuration example can be found in <code>examples/qwen2.5-vl-7B-rlvr/rlvr_megatron.yaml</code>, and the difference with LLM mainly exists in rewards settings which include visual specific reward and wold be introduced later.</p><p>   <strong>Reward Settings</strong>
The <code>rewards</code> section contains reward worker configurations for different domains:</p><ul><li><p><strong>math</strong></p><ul><li><code>worker_cls</code>: Worker class name (e.g., <code>MathRuleRewardWorker</code>)</li><li><code>tag_included</code>: These tags use the reward domain for calculation.</li><li><code>model_args</code>: Reward model parameters</li><li><code>world_size</code>: Number of workers</li></ul></li><li><p><strong>cv_detection</strong></p><ul><li>Similar configuration, but for evaluation of detection results</li></ul><p>Note that the domains provided here (math and cv_detection) should be same as listed in <code>domain_interleave_probs</code></p></li></ul><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reward-worker">Reward Worker<a href="#reward-worker" class="hash-link" aria-label="Direct link to Reward Worker" title="Direct link to Reward Worker">​</a></h3><p>The VLM rlvr pipeline supports reward mechanisms for different rlvr domains, and the example used inlcudes:</p><ul><li><p><strong>Mathematical Rule Reward (<code>MathRuleRewardWorker</code>)</strong> – Evaluates the correctness and steps of mathematical reasoning, which shares with RLVR pipeline for LLM</p></li><li><p><strong>Detection Reward (<code>DetectionRewardWorker</code>)</strong> – Evaluates detection results.</p><ul><li>The detection verifier used here references to <a href="https://github.com/MiniMax-AI/One-RL-to-See-Them-All/blob/main/reward_server/verify.py" target="_blank" rel="noopener noreferrer">MiniMax-AI/One-RL-to-See-Them-All</a>, which combines IoU and mAP scores with specified weighting coefficients for reward (a format reward is combined addtionally). </li><li>For IoU score:<ul><li>the IoU threshold is defined by <code>DET_IOU_THRESHOLD</code> environment variable, and it can be set to one of <code>[0.5, 0.55, 0.6,0.65, 0.7, 0.75, 0.8, 0.85, 0.9, 0.95, 0.99]</code> or set to one of <code>average</code> and <code>dynamic</code>. </li><li><code>average</code> is the default which averages IoU scores of all of these thresholds</li><li><code>dynamic</code> is an introduced dynamic IoU reward mechanism that provides adaptive, progressive feedback to improves stability and performance. It uses different thresholds for different trainingsteps. Specifically, the IoU threshold is set to 0.85 for the first 10% training steps, and 0.95 for the next 15% training steps, and 0.99 for the remaining training steps.</li><li>Additionally, the IoU score for each threshold includes two items with differnet strategies(<code>greedy_match_by_iou_max_iou_first</code> and <code>greedy_match_by_iou_max_label_first</code>), and completeness (calculated by <code>1.0 - (FN_ratio + FP_raio) / 2.0</code>) is also taken into account by a completeness weighting coefficient in each item score.</li></ul></li></ul><p>Please refer to the <a href="https://arxiv.org/pdf/2505.18129" target="_blank" rel="noopener noreferrer">paper</a> for more details</p></li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="️data-preparation">✨️Data Preparation<a href="#️data-preparation" class="hash-link" aria-label="Direct link to ✨️Data Preparation" title="Direct link to ✨️Data Preparation">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-format">Data Format<a href="#data-format" class="hash-link" aria-label="Direct link to Data Format" title="Direct link to Data Format">​</a></h3><p>For multi-domain RLVR, we use data files with parquet format from <a href="https://huggingface.co/datasets/One-RL-to-See-Them-All/Orsta-Data-47k" target="_blank" rel="noopener noreferrer">One-RL-to-See-Them-All/Orsta-Data-47k</a> as example inputs thus following their data schema, and here is a sample of math domain to illustrate the data format:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;data_source&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mm_math&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;images&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PIL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PngImagePlugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PngImageFile image mode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">RGB size</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">252x56 at </span><span class="token number" style="color:#36acaa">0x15EEEA390</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;prompt&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;image&gt;As shown in the figure, point D is the midpoint of line segment AC, $BC = \\frac{1}{2}AB$, and $BD = 1$cm. What is the length of AB?&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;role&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ability&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;math&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;reward_model&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;answer&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ground_truth&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;\\boxed{4}&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;accuracy_ratio&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;format_ratio&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;verifier&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mathverify&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;verifier_parm&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;det_verifier_normalized&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;det_reward_ratio&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;iou_max_label_first&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;iou_max_iou_first&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;iou_completeness&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;map&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;map50&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;map75&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;extra_info&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image_path&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;images/51284809.png&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The underlying data schema is</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;data_source&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;images&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Sequence</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">feature</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">Image</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">mode</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> decode</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> length</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;prompt&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;content&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;role&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;ability&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;reward_model&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;answer&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;ground_truth&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;accuracy_ratio&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;format_ratio&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;verifier&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;verifier_parm&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;det_verifier_normalized&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;bool&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;det_reward_ratio&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;iou_max_label_first&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;iou_max_iou_first&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;iou_completeness&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;map&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;map50&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&#x27;map75&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;float32&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;extra_info&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&#x27;id&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;image_path&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dtype</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;string&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">id</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>with the following field description:</p><ul><li><code>data_source</code> (Required): the source of the data, e.g. <code>object365_train</code>. <strong>NOTE: It should be one value included in <code>tag_included</code> of a domain provided under rewards section in the configuration to indicate this sample belonging to the domain and using corresponding reward worker</strong> . Additionally, it is used in validation to give seperated metrics for different data sources.</li><li><code>images</code> (Required): a list of PIL images</li><li><code>prompt</code> (Required): prompt with chat templates. <strong>NOTE</strong>: use <code>&lt;image&gt;</code> as image token and <code>prompt</code> should have image tokens with the same number as <code>images</code></li><li><code>ability</code> (Optional): indicating data domain, e.g. <code>cv_detection</code>. Data from same domain should have the same <code>ability</code> value. While it is not used yet.</li><li><code>reward_model</code> (Required): reward related information, combined with reward  <ul><li><code>answer</code> (Optional): the ground truth, not used yet and <code>ground_truth</code> is used instead</li><li><code>ground_truth</code> (Required): the formated ground truth commonly, and the format is corresponding to answer extraction method in reward worker. For example, <code>ground_truth</code> of detection should be included in <code>&quot;&lt;answer&gt;&quot;</code> and <code>&quot;&lt;/answer&gt;&quot;</code> to be consistent with <code>detection_reward_worker.py</code> which extracts answer using <code>&quot;&lt;answer&gt;&quot;</code> and <code>&quot;&lt;/answer&gt;&quot;</code></li><li><code>accuracy_ratio</code> (Required): coeficient of accuracy for score/reward calculation</li><li><code>format_ratio</code> (Required): coeficient of format for score/reward calculation</li><li><code>verifier</code> (Optional): verifier name, e.g. <code>detection</code>, not used yet. </li><li><code>verifier_parm</code> (Optional): verifier parameters, all sub-fields are optional and only required for detection<ul><li><code>det_verifier_normalized</code>: whether to normalize bounding box iou to height/width sized <code>1000</code>, this is needed when ground truth is normalized</li><li><code>det_reward_ratio</code>: weighting coeficients for various detection score combination<ul><li><code>iou_max_label_first</code>: coeficient for iou score using <code>greedy_match_by_iou_max_iou_first</code> as strategy</li><li><code>iou_max_iou_first</code>: coeficient for iou score using <code>greedy_match_by_iou_max_label_first</code> as strategy</li><li><code>iou_completeness</code>: coeficient for iou completeness </li><li><code>map</code>: coeficient for map</li><li><code>map50</code>: coeficient for map50</li><li><code>map75</code>: coeficient for map75</li></ul></li></ul></li></ul></li><li><code>extra_info</code> (Optional): extra information, not used yet</li></ul><p>A more complicated sample with all fields from detection domain is as following:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;data_source&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v3det_train&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;images&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PIL</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PngImagePlugin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">PngImageFile image mode</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">RGB size</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">799x533 at </span><span class="token number" style="color:#36acaa">0x15EF1DF90</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;prompt&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;content&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;image&gt;\nLocate all objects of the designated class present in the image:\n- dog collar\n- shiba dog\n\nBegin by clearly explaining your thought process enclosed within &lt;think&gt; and &lt;/think&gt; tags. Afterward, present your final detection results enclosed within &lt;answer&gt; and &lt;/answer&gt; tags.\nFor example:\n&lt;think&gt;\nYour detailed reasoning process here.\n&lt;/think&gt;\n&lt;answer&gt;\n[{&#x27;bbox_2d&#x27;: [x1,y1,x2,y2],&#x27;label&#x27;: label_name}]\n&lt;/answer&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;role&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;user&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;ability&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cv_detection&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;reward_model&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;answer&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[{&#x27;bbox_2d&#x27;: [484, 227, 818, 998], &#x27;label&#x27;: &#x27;shiba dog&#x27;}, {&#x27;bbox_2d&#x27;: [106, 142, 473, 998], &#x27;label&#x27;: &#x27;shiba dog&#x27;}, {&#x27;bbox_2d&#x27;: [274, 468, 427, 652], &#x27;label&#x27;: &#x27;dog collar&#x27;}, {&#x27;bbox_2d&#x27;: [490, 522, 609, 611], &#x27;label&#x27;: &#x27;dog collar&#x27;}]&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;ground_truth&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&lt;answer&gt;\n[{&#x27;bbox_2d&#x27;: [484, 227, 818, 998], &#x27;label&#x27;: &#x27;shiba dog&#x27;}, {&#x27;bbox_2d&#x27;: [106, 142, 473, 998], &#x27;label&#x27;: &#x27;shiba dog&#x27;}, {&#x27;bbox_2d&#x27;: [274, 468, 427, 652], &#x27;label&#x27;: &#x27;dog collar&#x27;}, {&#x27;bbox_2d&#x27;: [490, 522, 609, 611], &#x27;label&#x27;: &#x27;dog collar&#x27;}]\n&lt;/answer&gt;&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;accuracy_ratio&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;format_ratio&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.10000000149011612</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;verifier&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;detection&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;verifier_parm&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;det_verifier_normalized&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&quot;det_reward_ratio&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;iou_max_label_first&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;iou_max_iou_first&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;iou_completeness&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.30000001192092896</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;map&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;map50&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token string" style="color:#e3116c">&quot;map75&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;extra_info&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">None</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;image_path&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;images/a00004438/19_1169_36968567106_1209f085a7_c.jpg&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can organize your own data as the above format and use it in the pipeline</p><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="️running-the-pipeline">✨️Running the Pipeline<a href="#️running-the-pipeline" class="hash-link" aria-label="Direct link to ✨️Running the Pipeline" title="Direct link to ✨️Running the Pipeline">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-1-using-python-launcher-script">Method 1: Using Python Launcher Script<a href="#method-1-using-python-launcher-script" class="hash-link" aria-label="Direct link to Method 1: Using Python Launcher Script" title="Direct link to Method 1: Using Python Launcher Script">​</a></h3><p>The primary method is to use the <code>examples/start_rlvr_vl_pipeline.py</code> script. This script uses Hydra to load and manage configurations.</p><ol><li><p><strong>Select or Create a Configuration File</strong><br>
<!-- -->Start with an example YAML (e.g., <code>examples/qwen2.5-vl-7B-rlvr/rlvr_megatron.yaml</code>) or create your own configuration.</p></li><li><p><strong>Execute the Python Launcher Script</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Make sure you are in the root directory of the ROLL (ScaleAligner) project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># export PYTHONPATH=$(pwd):$PYTHONPATH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python examples/start_rlvr_vl_pipeline.py </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_path examples/qwen2.5-vl-7B-rlvr </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_name rlvr_megatron</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><code>--config_path</code> – Directory containing your YAML configuration.</li><li><code>--config_name</code> – Filename (without <code>.yaml</code>).</li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="method-2-using-helper-shell-scripts">Method 2: Using Helper Shell Scripts<a href="#method-2-using-helper-shell-scripts" class="hash-link" aria-label="Direct link to Method 2: Using Helper Shell Scripts" title="Direct link to Method 2: Using Helper Shell Scripts">​</a></h3><p>The <code>examples</code> directory typically contains shell scripts that wrap the Python launcher (e.g., <code>run_rlvr_pipeline.sh</code>).</p><p>Example structure:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Example: examples/qwen2.5-vl-7B-rlvr/run_rlvr_pipeline.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">CONFIG_NAME</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;rlvr_megatron&quot;</span><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># rlvr_megatron.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">CONFIG_PATH</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;examples/qwen2.5-vl-7B-rlvr&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Set environment variables and other configurations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python examples/start_rlvr_vl_pipeline.py </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_path </span><span class="token variable" style="color:#36acaa">$CONFIG_PATH</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_name </span><span class="token variable" style="color:#36acaa">$CONFIG_NAME</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$@</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain">   </span><span class="token comment" style="color:#999988;font-style:italic"># Pass any additional parameters</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run using:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">bash</span><span class="token plain"> examples/qwen2.5-vl-7B-rlvr/run_rlvr_pipeline.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="️step-by-step-example">✨️Step-by-Step Example<a href="#️step-by-step-example" class="hash-link" aria-label="Direct link to ✨️Step-by-Step Example" title="Direct link to ✨️Step-by-Step Example">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-configure-settings">Step 1: Configure Settings<a href="#step-1-configure-settings" class="hash-link" aria-label="Direct link to Step 1: Configure Settings" title="Direct link to Step 1: Configure Settings">​</a></h3><ul><li><p>File: <code>examples/qwen2.5-vl-7B-rlvr/rlvr_megatron.yaml</code><br>
<!-- -->Key sections include <code>exp_name</code>, <code>seed</code>, <code>output_dir</code>, model paths, <code>actor_train</code>, <code>actor_infer</code>, <code>reference</code>, PPO parameters, and reward configurations.</p></li><li><p>Pay special attention to these configuration sections:</p><ul><li>Data configuration: <code>actor_train.data_args.file_name</code> and <code>domain_interleave_probs</code></li><li>Model configuration: <code>pretrain</code> path</li><li>Distributed strategies: <code>strategy_args</code> and <code>device_mapping</code> for each worker</li><li>Reward configuration: Reward workers for different domains in the <code>rewards</code> section</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-prepare-environment-and-dependencies">Step 2: Prepare Environment and Dependencies<a href="#step-2-prepare-environment-and-dependencies" class="hash-link" aria-label="Direct link to Step 2: Prepare Environment and Dependencies" title="Direct link to Step 2: Prepare Environment and Dependencies">​</a></h3><ul><li><p>Ensure all necessary dependencies are installed. NOTE: VLLM is the only supported inference engine for VLM pipeline currently, thus use the corresponding requirement files:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">pip </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> -r requirements_torch251_vllm.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Verify that all model paths in the configuration are accessible.</p></li><li><p>Prepare training and validation datasets, ensuring they conform to the data format requirements described above.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-launch-the-pipeline">Step 3: Launch the Pipeline<a href="#step-3-launch-the-pipeline" class="hash-link" aria-label="Direct link to Step 3: Launch the Pipeline" title="Direct link to Step 3: Launch the Pipeline">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python examples/start_rlvr_vl_pipeline.py </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_path examples/qwen2.5-vl-7B-rlvr </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       --config_name rlvr_megatron</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-4-monitoring">Step 4: Monitoring<a href="#step-4-monitoring" class="hash-link" aria-label="Direct link to Step 4: Monitoring" title="Direct link to Step 4: Monitoring">​</a></h3><ul><li><p><strong>Console Output</strong> – Observe Hydra, Ray, and pipeline logs.</p></li><li><p><strong>Log Files</strong> – Check the <code>logging_dir</code> specified in the YAML.</p></li><li><p><strong>TensorBoard</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tensorboard --logdir </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">your_log_dir</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-5-outputs-and-results">Step 5: Outputs and Results<a href="#step-5-outputs-and-results" class="hash-link" aria-label="Direct link to Step 5: Outputs and Results" title="Direct link to Step 5: Outputs and Results">​</a></h3><ul><li><strong>Trained Models</strong> – Checkpoints are saved in the <code>output_dir</code>.</li><li><strong>Evaluation Metrics</strong> – Recorded in TensorBoard and the console.</li><li><strong>Generated Examples</strong> – The pipeline periodically outputs generated examples so you can visually assess model improvements.</li></ul><hr><p><em>Happy experimenting!</em></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/alibaba/ROLL/tree/main/docs_roll/docs/English/UserGuide/pipeline/vl_rlvr_pipeline_start.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-08-26T09:29:59.000Z">Aug 26, 2025</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ROLL/docs/English/UserGuide/pipeline/rlvr_pipeline_start"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RLVR Pipeline</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ROLL/docs/English/UserGuide/trackers_and_metrics"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Trackers and Metrics</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#️overview" class="table-of-contents__link toc-highlight">✨️Overview</a></li><li><a href="#️core-components" class="table-of-contents__link toc-highlight">✨️Core Components</a><ul><li><a href="#main-module-rlvrvlmpipeline" class="table-of-contents__link toc-highlight">Main Module (<code>RLVRVLMPipeline</code>)</a></li><li><a href="#configuration-file-rlvrconfig" class="table-of-contents__link toc-highlight">Configuration File (<code>RLVRConfig</code>)</a></li><li><a href="#reward-worker" class="table-of-contents__link toc-highlight">Reward Worker</a></li></ul></li><li><a href="#️data-preparation" class="table-of-contents__link toc-highlight">✨️Data Preparation</a><ul><li><a href="#data-format" class="table-of-contents__link toc-highlight">Data Format</a></li></ul></li><li><a href="#️running-the-pipeline" class="table-of-contents__link toc-highlight">✨️Running the Pipeline</a><ul><li><a href="#method-1-using-python-launcher-script" class="table-of-contents__link toc-highlight">Method 1: Using Python Launcher Script</a></li><li><a href="#method-2-using-helper-shell-scripts" class="table-of-contents__link toc-highlight">Method 2: Using Helper Shell Scripts</a></li></ul></li><li><a href="#️step-by-step-example" class="table-of-contents__link toc-highlight">✨️Step-by-Step Example</a><ul><li><a href="#step-1-configure-settings" class="table-of-contents__link toc-highlight">Step 1: Configure Settings</a></li><li><a href="#step-2-prepare-environment-and-dependencies" class="table-of-contents__link toc-highlight">Step 2: Prepare Environment and Dependencies</a></li><li><a href="#step-3-launch-the-pipeline" class="table-of-contents__link toc-highlight">Step 3: Launch the Pipeline</a></li><li><a href="#step-4-monitoring" class="table-of-contents__link toc-highlight">Step 4: Monitoring</a></li><li><a href="#step-5-outputs-and-results" class="table-of-contents__link toc-highlight">Step 5: Outputs and Results</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Examples</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ROLL/docs/简体中文/快速开始/single_node_quick_start_cn">ROLL单机实践手册</a></li><li class="footer__item"><a class="footer__link-item" href="/ROLL/docs/简体中文/快速开始/config_guide_cn">配置指南</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/alibaba/ROLL" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Alibaba.</div></div></div></footer></div>
<script src="/ROLL/assets/js/runtime~main.9d31db2a.js"></script>
<script src="/ROLL/assets/js/main.708a671a.js"></script>
</body>
</html>