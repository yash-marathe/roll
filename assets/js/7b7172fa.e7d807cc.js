"use strict";(self.webpackChunkdocs_roll=self.webpackChunkdocs_roll||[]).push([[9416],{5680:(e,t,o)=>{o.d(t,{xA:()=>g,yg:()=>m});var r=o(6540);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,r)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function l(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var c=r.createContext({}),s=function(e){var t=r.useContext(c),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},g=function(e){var t=s(e.components);return r.createElement(c.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef(function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,c=e.parentName,g=l(e,["components","mdxType","originalType","parentName"]),d=s(o),p=n,m=d["".concat(c,".").concat(p)]||d[p]||u[p]||a;return o?r.createElement(m,i(i({ref:t},g),{},{components:o})):r.createElement(m,i({ref:t},g))});function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,i=new Array(a);i[0]=p;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[d]="string"==typeof e?e:n,i[1]=l;for(var s=2;s<a;s++)i[s]=o[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,o)}p.displayName="MDXCreateElement"},9916:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=o(8168),n=(o(6540),o(5680));const a={},i="Converting MCoreAdapter Models to Hugging Face Format",l={unversionedId:"English/UserGuide/megatron_convert_2_hf",id:"English/UserGuide/megatron_convert_2_hf",title:"Converting MCoreAdapter Models to Hugging Face Format",description:"MCoreAdapter provides tools for converting between Megatron(McoreAdapter) and Hugging Face model formats. This document will guide you on how to convert a trained Megatron model to Hugging Face format for use in other projects.",source:"@site/docs/English/UserGuide/megatron_convert_2_hf.md",sourceDirName:"English/UserGuide",slug:"/English/UserGuide/megatron_convert_2_hf",permalink:"/ROLL/docs/English/UserGuide/megatron_convert_2_hf",draft:!1,editUrl:"https://github.com/alibaba/ROLL/tree/main/docs_roll/docs/English/UserGuide/megatron_convert_2_hf.md",tags:[],version:"current",lastUpdatedAt:1758784255,formattedLastUpdatedAt:"Sep 25, 2025",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"ROLL Resource Configuration",permalink:"/ROLL/docs/English/UserGuide/device_mapping"},next:{title:"GPU Time-Division Multiplexing Control Guide",permalink:"/ROLL/docs/English/UserGuide/offload_reload_control"}},c={},s=[{value:"Conversion Tool",id:"conversion-tool",level:2},{value:"Conversion Command",id:"conversion-command",level:2},{value:"Notes",id:"notes",level:2},{value:"Direct Use of Hugging Face Models",id:"direct-use-of-hugging-face-models",level:2}],g={toc:s},d="wrapper";function u({components:e,...t}){return(0,n.yg)(d,(0,r.A)({},g,t,{components:e,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"converting-mcoreadapter-models-to-hugging-face-format"},"Converting MCoreAdapter Models to Hugging Face Format"),(0,n.yg)("p",null,"MCoreAdapter provides tools for converting between Megatron(McoreAdapter) and Hugging Face model formats. This document will guide you on how to convert a trained Megatron model to Hugging Face format for use in other projects."),(0,n.yg)("h2",{id:"conversion-tool"},"Conversion Tool"),(0,n.yg)("p",null,"MCoreAdapter includes a conversion tool ",(0,n.yg)("inlineCode",{parentName:"p"},"tools/convert.py")," that can convert Megatron(McoreAdapter) models to Hugging Face format."),(0,n.yg)("h2",{id:"conversion-command"},"Conversion Command"),(0,n.yg)("p",null,"To convert a model trained with megatron_strategy to a Hugging Face model, use the following command:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"python tools/convert.py --checkpoint_path path_to_megatron_model --output_path path_to_output_hf_model\n")),(0,n.yg)("p",null,"Where:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"path_to_megatron_model")," is the path to the McoreAdapter model you want to convert"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"path_to_output_hf_model")," is the output path for the converted Hugging Face model")),(0,n.yg)("h2",{id:"notes"},"Notes"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"The conversion process may take some time depending on the size of the model."),(0,n.yg)("li",{parentName:"ol"},"Ensure you have sufficient disk space to store the converted model."),(0,n.yg)("li",{parentName:"ol"},"The converted Hugging Face model can be used directly in projects that support the Hugging Face Transformers library.")),(0,n.yg)("h2",{id:"direct-use-of-hugging-face-models"},"Direct Use of Hugging Face Models"),(0,n.yg)("p",null,"It's worth noting that MCoreAdapter can directly load Hugging Face models without explicitly converting models to Megatron(McoreAdapter) format. This is particularly useful when you want to use Hugging Face models for reinforcement learning in the Roll framework."))}u.isMDXComponent=!0}}]);